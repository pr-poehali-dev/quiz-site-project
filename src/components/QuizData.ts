import { QuestionType } from './QuizQuestion';

export const quizQuestions: QuestionType[] = [
  {
    id: 1,
    text: "Какие типы жилья предоставляет Дирекция гостиничного жилого фонда РАНХиГС?",
    options: [
      "Только общежития коридорного типа",
      "Общежития блочного и коридорного типа, а также гостиничные номера",
      "Только отдельные квартиры", 
      "Только гостиничные номера"
    ],
    correctAnswer: 1
  },
  {
    id: 2,
    text: "Кто имеет приоритет при заселении в общежития РАНХиГС?",
    options: [
      "Студенты из Москвы и Московской области",
      "Иностранные студенты и абитуриенты", 
      "Студенты-первокурсники из регионов России",
      "Студенты старших курсов с высоким рейтингом"
    ],
    correctAnswer: 2
  },
  {
    id: 3,
    text: "Какие документы необходимо предоставить для заселения в общежитие?",
    options: [
      "Только паспорт и студенческий билет",
      "Паспорт, медицинская справка и направление от деканата",
      "Паспорт, справка о флюорографии, заявление и договор найма жилого помещения",
      "Только заявление о предоставлении места"
    ],
    correctAnswer: 2
  },
  {
    id: 4,
    text: "Как часто проводится уборка в общежитиях РАНХиГС?",
    options: [
      "Ежедневно силами клининговой службы",
      "Раз в неделю по расписанию",
      "Студенты сами ответственны за уборку своих комнат, места общего пользования убираются регулярно",
      "Только по запросу студентов"
    ],
    correctAnswer: 2
  },
  {
    id: 5,
    text: "Какие объекты инфраструктуры доступны на территории студенческих общежитий РАНХиГС?",
    options: [
      "Только столовая и прачечная",
      "Учебные аудитории, спортзал, библиотека",
      "Комнаты отдыха, кухни, прачечные, спортивные площадки и Wi-Fi",
      "Нет дополнительной инфраструктуры"
    ],
    correctAnswer: 2
  }
];

export const getQuizResults = (answers: number[]) => {
  if (!answers.length) return { score: 0, message: "Вы не ответили ни на один вопрос." };
  
  let correctCount = 0;
  
  // Проверим только те ответы, для которых у нас есть вопросы
  answers.forEach((answer, index) => {
    if (index < quizQuestions.length && answer === quizQuestions[index].correctAnswer) {
      correctCount++;
    }
  });
  
  // Используем минимальное значение между количеством ответов и количеством вопросов
  const totalAnswered = Math.min(answers.length, quizQuestions.length);
  const score = totalAnswered > 0 ? Math.round((correctCount / totalAnswered) * 100) : 0;
  
  let message = "";
  if (score >= 80) {
    message = "Отлично! Вы отлично знакомы с жилым фондом РАНХиГС. Мы будем рады видеть вас в числе наших студентов!";
  } else if (score >= 60) {
    message = "Хороший результат! Вы имеете представление о проживании в РАНХиГС, но есть куда расти.";
  } else if (score >= 40) {
    message = "Неплохо, но вам стоит узнать больше о возможностях проживания в РАНХиГС.";
  } else {
    message = "Пока вы не очень хорошо знакомы с общежитиями РАНХиГС. Рекомендуем изучить больше информации на нашем сайте.";
  }
  
  return { score, message, correctCount, totalQuestions: totalAnswered };
};
